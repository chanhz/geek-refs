## MySQL 日志 - 更新语句是如何执行的？

如何做数据同步和恢复？


redo是物理的，binlog是逻辑的；

现在由于redo是属于InnoDB存储引擎，所以必须要有binlog，因为你可以使用别的引擎。

保证数据库的一致性，必须要保证2份日志一致，使用的2阶段式提交，就像事务，不是成功就是失败，不能让中间环节出现

如果有一天mysql只有InnoDB引擎了，有redo来实现复制，那么感觉oracle的DG就诞生了(?)
物理的速度也将远超逻辑的，毕竟只记录了改动向量
binlog几大模式，一般采用row，因为遇到时间，从库可能会出现不一致的情况，但是row更新前后都有，会导致日志变大
最后2个参数，保证事务成功，日志必须落盘，这样，数据库crash后，就不会丢失某个事务的数据了




备份时间周期的长短，会有两个点
1. 首先，是恢复数据丢失的时间和业务能忍受的程度，既然需要恢复，肯定是数据丢失了。如果一天一备份的话，只要找到这天的全备，加入这天某段时间的binlog来恢复，如果一周一备份，假设是周一，而你要恢复的数据是周日某个时间点，那就，需要全备+周一到周日某个时间点的全部binlog用来恢复，时间相比前者需要增加很多；


2. 其次，是数据库丢失，如果一周一备份的话，需要确保整个一周的binlog都完好无损，否则将无法恢复；而一天一备，只要保证这天的binlog都完好无损；当然这个可以通过校验，或者冗余等技术来实现，相比之下，上面那点更重要